name: Purge jsDelivr Cache

on:
  push:
    branches:
      - main
    paths:
      - 'cards-slider/nexus-cards-generations.js'
      - 'secciones/renderizar-secciones.js'

jobs:
  purge:
    runs-on: ubuntu-latest
    steps:
      - name: Purge jsDelivr Files
        run: |
          # Definimos el nombre del repo manualmente para evitar errores de may√∫sculas de la variable de GitHub
          REPO="gr-hub-projects/public-scripts-gr-hub"
          
          FILES=(
            "cards-slider/nexus-cards-generations.js"
            "secciones/renderizar-secciones.js"
          )
          
          for FILE in "${FILES[@]}"; do
            echo "Intentando purgar: https://purge.jsdelivr.net/gh/$REPO@main/$FILE"
            # Usamos -s (silent) y -S (show error) pero mostramos el Header con -i
            curl -i -s -S "https://purge.jsdelivr.net/gh/$REPO@main/$FILE"
            echo -e "\n--- Siguiente archivo ---\n"
          done